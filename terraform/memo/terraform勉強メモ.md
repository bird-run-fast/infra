# terraform 勉強会用メモ

## インストール
* Windows 現状はだと直接パッケージをダウンロード
* Linux, Mac だと tfenv っていうパッケージを使ってインストールするのがデファクトらしい
    * terraform のバージョン管理用のパッケージ。コマンドでバージョン上げたり下げたりできる。
    * Windows そのうち来るかも？

## tfファイルについて
* ドキュメントリンク -> (リンク)
* 例えばこんなの -> (作ったフォルダのリンク貼る)
```tf
# `aws_vpc` リソースを {{vpc名}} という名前で作成するコードになる 
# `aws_vpc` とか `cidr_block` とかは terraform 既定の項目名
resource "aws_vpc" "{{vpc名}}" {
    cidr_block = "{{IPアドレス}}"
    ...
}
```
* 実行時のポイント
    * ディレクトリ直下のtfファイルをすべて読み込んで、構文の依存関係を自動で解析して実行順序が自動的に決まる
        * vnet 作ってから subnet 作るみたいなのはどっちを先に書いても作成順には影響しない
        * tf形式ならファイル名は動作に影響しない
        * ファイルを分割してもしなくても動作には影響しない.
        * Terraform モジュールを使うことでフォルダ階層化して管理もできる
* 構文について
    * resource: インフラ上のリソース作成を行う構文
    * data: リソースを取得するための構文

## tf stateファイルについて

* 例えばこんなの -> (リンク)
* 裏で terraform が管理しているインフラリソースをすべて記載している json 形式のファイル
    * terraformが動的に作るものなので直接管理はしなくてOK
    * ただterraformは、実質ここを見て動いているので役割的にはとても重要
* 共有で管理できる場所においておく必要がある
    * 各自でばらばらのステートファイル持っているとまったく管理できないので..
    * ストレージアカウントに置いておくのが一般的
    * 何も指定しないとローカルに作成される。
* 例えばコンソール側で一部作ったりしたらどうなる…？
    * terraformでは管理できないっぽい
    * data 構文を使うことでリソースの情報自体は取得できる

## コードを各準備
1. tfstateファイルをストレージサービスに置く

## コードを書く

## コマンド紹介

## 実行

## そのほか

## ファイル構成のプラクティス

## terraform モジュール